{% extends "layout.html" %}

{% block content %}
<!-- About Hero Section -->
<section class="about-hero">
    <div class="container">
        <div class="about-hero-content" data-aos="fade-up">
            <span class="about-label">Who We Are</span>
            <h1 class="about-title">
                <span class="line">We Are</span>
                <span class="line highlight">Change Makers.</span>
            </h1>
            <p class="about-tagline">Empowering communities through entrepreneurial action since 2015</p>
        </div>
    </div>
    <div class="about-hero-visual"></div>
</section>

<!-- Mission & Vision Section -->
<section class="mission-vision-section">
    <div class="container">
        <div class="mv-grid">
            <!-- Mission Card -->
            <div class="mv-card mission" data-aos="fade-up">
                <div class="mv-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 16v-4M12 8h.01"></path>
                    </svg>
                </div>
                <h3>Our Mission</h3>
                <p>Enactus is dedicated to creating a better world while developing the next generation of leaders and
                    social entrepreneurs. We believe that investing in students who take entrepreneurial action for
                    others creates a better world for us all.</p>
                <div class="mv-accent"></div>
            </div>

            <!-- Vision Card -->
            <div class="mv-card vision" data-aos="fade-up" data-aos-delay="100">
                <div class="mv-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </div>
                <h3>Our Vision</h3>
                <p>To be the leading platform for students to experience the impact of entrepreneurial action. By 2030,
                    we aim to touch 1 million lives through sustainable community projects.</p>
                <div class="mv-accent"></div>
            </div>

            <!-- Values Card -->
            <div class="mv-card values" data-aos="fade-up" data-aos-delay="200">
                <div class="mv-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                </div>
                <h3>Our Values</h3>
                <p>Integrity, Innovation, Impact, and Inclusion form the pillars of everything we do. We believe in
                    sustainable solutions that empower communities to thrive independently.</p>
                <div class="mv-accent"></div>
            </div>
        </div>
    </div>
</section>

<!-- Story Section -->
<section class="story-section">
    <div class="container">
        <div class="story-grid">
            <div class="story-images" data-aos="fade-right">
                <div class="story-img-main">
                    <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=800&q=80"
                        alt="Team collaborating">
                </div>
                <div class="story-img-secondary">
                    <img src="https://images.unsplash.com/photo-1517486808906-6ca8b3f04846?auto=format&fit=crop&w=400&q=80"
                        alt="Workshop session">
                </div>
                <div class="story-badge">
                    <span class="badge-number">9+</span>
                    <span class="badge-text">Years of Impact</span>
                </div>
            </div>
            <div class="story-content" data-aos="fade-left">
                <span class="section-label-alt">Our Story</span>
                <h2>From a Dream to a Movement</h2>
                <p class="lead">Founded in 2015, our chapter started with just 8 passionate students who believed in the
                    power of entrepreneurship to solve social problems.</p>
                <p>Today, we've grown into a community of 75+ active members, 6 specialized departments, and 3 ongoing
                    projects that directly impact thousands of lives in our community.</p>
                <p>What sets us apart is our commitment to sustainable solutions. We don't just helpâ€”we empower
                    communities to help themselves through skill development, financial literacy, and entrepreneurial
                    training.</p>
                <div class="story-milestones">
                    <div class="milestone">
                        <span class="milestone-year">2015</span>
                        <span class="milestone-event">Chapter Founded</span>
                    </div>
                    <div class="milestone">
                        <span class="milestone-year">2018</span>
                        <span class="milestone-event">First National Recognition</span>
                    </div>
                    <div class="milestone">
                        <span class="milestone-year">2021</span>
                        <span class="milestone-event">10,000 Lives Impacted</span>
                    </div>
                    <div class="milestone">
                        <span class="milestone-year">2024</span>
                        <span class="milestone-event">Expanding Horizons</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Impact Stats Section -->
<section class="about-stats-section">
    <div class="container">
        <div class="about-stats-grid">
            <div class="about-stat-card" data-aos="zoom-in">
                <div class="stat-visual">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
                <h3 class="stat-number" data-target="75" data-suffix="+">0</h3>
                <p class="stat-label">Active Members</p>
            </div>
            <div class="about-stat-card" data-aos="zoom-in" data-aos-delay="100">
                <div class="stat-visual">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5">
                        <polygon
                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                        </polygon>
                    </svg>
                </div>
                <h3 class="stat-number" data-target="15" data-suffix="">0</h3>
                <p class="stat-label">Projects Completed</p>
            </div>
            <div class="about-stat-card" data-aos="zoom-in" data-aos-delay="200">
                <div class="stat-visual">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                </div>
                <h3 class="stat-number" data-target="10000" data-suffix="+">0</h3>
                <p class="stat-label">Lives Impacted</p>
            </div>
            <div class="about-stat-card" data-aos="zoom-in" data-aos-delay="300">
                <div class="stat-visual">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5">
                        <circle cx="12" cy="8" r="7"></circle>
                        <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
                    </svg>
                </div>
                <h3 class="stat-number" data-target="8" data-suffix="">0</h3>
                <p class="stat-label">Awards Won</p>
            </div>
        </div>
    </div>
</section>

<!-- Global Network Section -->
<section class="global-network-section">
    <div class="global-network-overlay"></div>
    <div class="container">
        <div class="global-network-header" data-aos="fade-up">
            <span class="network-label">Our Network</span>
            <h2>Enactus Global Network</h2>
            <p>Connected across the world through a shared mission of social entrepreneurship. Enactus operates in 33
                countries with over 72,000 student leaders.</p>
        </div>

        <div class="network-stats-grid" data-aos="fade-up" data-aos-delay="100">
            <div class="network-stat-card">
                <div class="network-stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="2" y1="12" x2="22" y2="12"></line>
                        <path
                            d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
                        </path>
                    </svg>
                </div>
                <span class="network-stat-number">33</span>
                <span class="network-stat-label">COUNTRIES</span>
            </div>
            <div class="network-stat-card">
                <div class="network-stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                        <path d="M6 12v5c0 2 4 3 6 3s6-1 6-3v-5"></path>
                    </svg>
                </div>
                <span class="network-stat-number">1,730</span>
                <span class="network-stat-label">UNIVERSITIES</span>
            </div>
            <div class="network-stat-card">
                <div class="network-stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
                <span class="network-stat-number">72K+</span>
                <span class="network-stat-label">STUDENT LEADERS</span>
            </div>
            <div class="network-stat-card">
                <div class="network-stat-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                </div>
                <span class="network-stat-number">2M+</span>
                <span class="network-stat-label">LIVES IMPACTED</span>
            </div>
        </div>

        <!-- World Map with Dotted Pattern and Animated Connections -->
        <div class="world-map-container" data-aos="fade-up" data-aos-delay="200">
            <div class="map-wrapper" id="dottedMapWrapper">
                <!-- Dotted World Map Canvas -->
                <canvas id="dottedMapCanvas" class="dotted-map-canvas"></canvas>

                <!-- Map Tooltip -->
                <div id="map-tooltip" class="map-tooltip"></div>

                <!-- SVG Layer for Connections and Markers -->
                <!-- SVG Layer for Connections and Markers -->
                <svg class="map-overlay-svg" viewBox="0 0 800 400" preserveAspectRatio="xMidYMid meet">
                    <defs>
                        <filter id="markerGlow">
                            <feGaussianBlur stdDeviation="2" result="coloredBlur" />
                            <feMerge>
                                <feMergeNode in="coloredBlur" />
                                <feMergeNode in="SourceGraphic" />
                            </feMerge>
                        </filter>
                    </defs>

                    <!-- Connection Lines (Curved Paths) -->
                    <g class="connections" fill="none" stroke="#d4a553" stroke-width="1" opacity="0.4">
                        <!-- USA (193,117) to Europe (411,84) -->
                        <path class="connection-line" d="M 193 117 Q 300 60 411 84" />
                        <!-- USA (193,117) to Africa (462,257) -->
                        <path class="connection-line" d="M 193 117 Q 320 200 462 257" style="animation-delay: 1s;" />
                        <!-- Europe (411,84) to India (571,137) -->
                        <path class="connection-line" d="M 411 84 Q 490 110 571 137" style="animation-delay: 0.5s;" />
                        <!-- India (571,137) to Australia (735,275) -->
                        <path class="connection-line" d="M 571 137 Q 650 200 735 275" style="animation-delay: 1.5s;" />
                        <!-- China (657,111) to Australia (735,275) -->
                        <path class="connection-line" d="M 657 111 Q 700 200 735 275" style="animation-delay: 2s;" />
                    </g>

                    <!-- Map Markers -->
                    <g class="markers">
                        <!-- USA (Springfield - Global HQ) -->
                        <g class="marker" transform="translate(193, 117)"
                            data-name="Global Headquarters - Springfield, USA">
                            <circle r="8" fill="#d4a553" opacity="0.3" class="pulse-ring" />
                            <circle r="4" fill="#d4a553" filter="url(#markerGlow)" class="marker-dot" />
                            <circle r="2" fill="#fff" />
                        </g>

                        <!-- Netherlands (Europe) -->
                        <g class="marker" transform="translate(411, 84)" data-name="Enactus Netherlands">
                            <circle r="6" fill="#c4704f" opacity="0.3" class="pulse-ring" />
                            <circle r="3" fill="#c4704f" />
                            <circle r="1.5" fill="#fff" />
                        </g>

                        <!-- South Africa -->
                        <g class="marker" transform="translate(462, 257)" data-name="Enactus South Africa">
                            <circle r="6" fill="#c4704f" opacity="0.3" class="pulse-ring" />
                            <circle r="3" fill="#c4704f" />
                            <circle r="1.5" fill="#fff" />
                        </g>

                        <!-- India (Delhi) -->
                        <g class="marker" transform="translate(571, 137)" data-name="Enactus India">
                            <circle r="6" fill="#c4704f" opacity="0.3" class="pulse-ring" />
                            <circle r="3" fill="#c4704f" />
                            <circle r="1.5" fill="#fff" />
                        </g>

                        <!-- China (Beijing) -->
                        <g class="marker" transform="translate(657, 111)" data-name="Enactus China">
                            <circle r="6" fill="#c4704f" opacity="0.3" class="pulse-ring" />
                            <circle r="3" fill="#c4704f" />
                            <circle r="1.5" fill="#fff" />
                        </g>

                        <!-- Australia (Sydney) -->
                        <g class="marker" transform="translate(735, 275)" data-name="Enactus Australia">
                            <circle r="6" fill="#c4704f" opacity="0.3" class="pulse-ring" />
                            <circle r="3" fill="#c4704f" />
                            <circle r="1.5" fill="#fff" />
                        </g>

                        <!-- Brazil (Sao Paulo) -->
                        <g class="marker" transform="translate(297, 250)" data-name="Enactus Brazil">
                            <circle r="6" fill="#c4704f" opacity="0.3" class="pulse-ring" />
                            <circle r="3" fill="#c4704f" />
                            <circle r="1.5" fill="#fff" />
                        </g>
                    </g>
                </svg>

                <!-- Map Legend -->
                <div class="map-legend">
                    <div class="legend-item">
                        <span class="legend-dot hq"></span>
                        <span>Global Headquarters</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot regional"></span>
                        <span>Regional Offices</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-line"></span>
                        <span>Active Connections</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Join Us CTA Section -->
<section class="about-cta-section">
    <div class="container">
        <div class="about-cta-content" data-aos="fade-up">
            <h2>Ready to Make a Difference?</h2>
            <p>Join our community of changemakers and be part of something bigger than yourself.</p>
            <div class="cta-buttons">
                <a href="/team" class="btn-primary">Meet The Team</a>
                <a href="/events" class="btn-secondary">Upcoming Events</a>
            </div>
        </div>
    </div>
</section>

<!-- Dotted Map Script -->
<script>
    (function () {
        // --- 1. Dotted Map Rendering ---
        const canvas = document.getElementById('dottedMapCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        const wrapper = document.getElementById('dottedMapWrapper');
        
        // Load the mask image
        const mapMask = new Image();
        mapMask.src = '/static/images/world_map_mask.png';
        let maskData = null;
        let maskWidth = 0;
        let maskHeight = 0;

        mapMask.onload = function() {
            // Create an offscreen canvas to read pixel data
            const offCanvas = document.createElement('canvas');
            maskWidth = mapMask.width;
            maskHeight = mapMask.height;
            offCanvas.width = maskWidth;
            offCanvas.height = maskHeight;
            const offCtx = offCanvas.getContext('2d');
            offCtx.drawImage(mapMask, 0, 0);
            
            // Get pixel data
            const imageData = offCtx.getImageData(0, 0, maskWidth, maskHeight);
            maskData = imageData.data;
            
            // Draw the map initially
            drawDottedMap();
        };

        function isLand(x, y, width, height) {
            if (!maskData) return false;
            
            // Map canvas coordinates to mask image coordinates
            // Assuming Equirectangular projection match
            const maskX = Math.floor((x / width) * maskWidth);
            const maskY = Math.floor((y / height) * maskHeight);
            
            if (maskX < 0 || maskX >= maskWidth || maskY < 0 || maskY >= maskHeight) return false;
            
            // Index in pixel array (R, G, B, A)
            const index = (maskY * maskWidth + maskX) * 4;
            
            // Check alpha/opacity or darkness
            // Our mask is black continents on white/transparent
            // If transparent (alpha < 50) -> Ocean (if image is transparent bg)
            // If Black (R<50) -> Land
            
            const r = maskData[index];
            const g = maskData[index + 1];
            const b = maskData[index + 2];
            const a = maskData[index + 3];

            // If opaque and dark, it's land
            return a > 100 && r < 100;
        }

        function drawDottedMap() {
            if (!maskData) return; // Wait for image load

            const rect = wrapper.getBoundingClientRect();
            const width = rect.width;
            // Force 2:1 aspect ratio for accurate Equirectangular projection
            const height = width / 2; // Math.max(300, rect.height);
            
            // Update wrapper height to fit the map if needed, or just center it
            // wrapper.style.height = height + 'px'; 

            canvas.width = width * window.devicePixelRatio;
            canvas.height = height * window.devicePixelRatio;
            canvas.style.width = width + 'px';
            canvas.style.height = height + 'px';

            ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
            ctx.clearRect(0, 0, width, height);

            const dotSize = 1.25; // Slightly smaller dots for higher detail
            const spacing = 6;    // Tighter spacing for better resolution
            const dotColor = 'rgba(212, 165, 83, 0.15)'; // Faint dots for ocean
            const landColor = 'rgba(212, 165, 83, 0.8)'; // Bright dots for land

            // Draw dot grid
            for (let y = spacing / 2; y < height; y += spacing) {
                for (let x = spacing / 2; x < width; x += spacing) {
                    const land = isLand(x, y, width, height);

                    if (land || true) { // Draw ocean dots too? Or just land?
                        // Let's draw ocean dots very faintly for context, land dots brightly
                         ctx.beginPath();
                        if (land) {
                            ctx.arc(x, y, dotSize, 0, Math.PI * 2);
                            ctx.fillStyle = landColor;
                            ctx.fill();
                        } else {
                            // Optional: Faint ocean dots
                            ctx.arc(x, y, dotSize * 0.5, 0, Math.PI * 2);
                            ctx.fillStyle = dotColor;
                            ctx.fill();
                        }
                    }
                }
            }
        }

        // Redraw on resize
        let resizeTimeout;
        window.addEventListener('resize', function () {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(drawDottedMap, 150);
        });
        
        // --- 2. Interactive Tooltips ---
        const tooltip = document.getElementById('map-tooltip');
        const markers = document.querySelectorAll('.marker');

        if (tooltip && markers.length > 0) {
            markers.forEach(marker => {
                marker.addEventListener('mouseenter', (e) => {
                    const name = marker.getAttribute('data-name');
                    if (name) {
                        tooltip.textContent = name;
                        tooltip.classList.add('visible');
                    }
                });

                marker.addEventListener('mousemove', (e) => {
                    const wrapperRect = wrapper.getBoundingClientRect();
                    const x = e.clientX - wrapperRect.left;
                    const y = e.clientY - wrapperRect.top;
                    
                    tooltip.style.left = x + 'px';
                    tooltip.style.top = y + 'px';
                });

                marker.addEventListener('mouseleave', () => {
                    tooltip.classList.remove('visible');
                });
            });
        }
    })();
</script>

{% endblock %}